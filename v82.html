<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>SISTEMA DE CORTE v82.0</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Segoe UI,Arial;
  background:#f1f5f9;
  color:#0f172a;
}

/* ===== TOPO ===== */
.topo{
  background:linear-gradient(90deg,#0f172a,#064e3b);
  color:#fff;
  padding:20px;
  text-align:center;
  border-radius:0 0 18px 18px;
}
.topo img{
  width:70px;
  margin-bottom:10px;
}
.topo h1{margin:5px 0}

/* ===== CONTAINER ===== */
.box{
  max-width:1200px;
  margin:20px auto;
  background:#fff;
  padding:20px;
  border-radius:16px;
  box-shadow:0 15px 30px rgba(0,0,0,.1);
}

/* ===== BOT√ïES ===== */
.btn{
  border:none;
  border-radius:10px;
  padding:14px;
  font-weight:bold;
  cursor:pointer;
}
.btn-green{background:#10b981;color:#fff}
.btn-blue{background:#3b82f6;color:#fff}
.btn-gray{background:#64748b;color:#fff}

select,input{
  padding:8px;
  border-radius:8px;
  border:1px solid #cbd5f5;
  font-weight:bold;
}

/* ===== SE√á√ïES ===== */
.titulo{
  margin-top:35px;
  padding:15px;
  color:#fff;
  font-weight:bold;
  border-radius:10px;
  background:linear-gradient(90deg,#0ea5e9,#22c55e);
}

.card{
  margin-top:15px;
  border:2px solid #0f172a;
  border-radius:12px;
  padding:15px;
  page-break-inside:avoid;
}

.card-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-weight:bold;
  border-bottom:2px solid #0f172a;
  padding-bottom:8px;
  margin-bottom:10px;
}

/* ===== TABELA ===== */
table{width:100%;border-collapse:collapse}
th,td{
  border:1px solid #e5e7eb;
  padding:10px;
  text-align:center;
}
th{background:#1e293b;color:#fff}

/* ===== RESULTADOS ===== */
.ok{color:#16a34a;font-weight:bold}
.bad{color:#dc2626;font-weight:bold}

/* ===== IMPRESS√ÉO ===== */
@media print{
  .no-print{display:none!important}
  body{background:#fff}
  .box{box-shadow:none}
  footer{
    position:fixed;
    bottom:10px;
    width:100%;
    text-align:center;
    font-size:12px;
    color:rgba(0,128,128,.25);
  }
}
</style>
</head>

<body>

<div class="topo">
  <img src="SISTEMA DE CORTE PRO.png">
  <h1>SISTEMA DE CORTE v82.0</h1>
  <div>by Carlos Daniel / DANI</div>
</div>

<div class="box">

<!-- CONTROLES -->
<div class="no-print">
  <button class="btn btn-gray" onclick="gradeNumeros()">GRADE 38‚Äì58</button>
  <button class="btn btn-gray" onclick="gradeLetras()">GRADE LETRAS</button>
  <button class="btn btn-gray" onclick="addLinha()">+ TAMANHO</button>
</div>

<table class="no-print">
<thead>
<tr><th>TAMANHO</th><th>PEDIDO</th><th>A√á√ÉO</th></tr>
</thead>
<tbody id="entrada"></tbody>
</table>

<button class="btn btn-green no-print" style="width:100%;margin-top:20px" onclick="gerar()">‚ö° GERAR ENFESTOS</button>

<select id="filtroPrint" class="no-print" style="margin-top:15px;width:100%">
  <option value="all">Imprimir todas as op√ß√µes</option>
  <option value="op1">Somente Op√ß√£o 1</option>
  <option value="op2">Somente Op√ß√£o 2</option>
  <option value="op3">Somente Op√ß√£o 3</option>
</select>

<button class="btn btn-blue no-print" style="width:100%;margin-top:10px" onclick="imprimir()">üñ®Ô∏è IMPRIMIR</button>

<!-- RESULTADOS -->
<div id="resultado"></div>

</div>

<footer>
  by Carlos Daniel / DANI
</footer>

<script>
const entrada=document.getElementById("entrada");
const res=document.getElementById("resultado");

function addLinha(t="",q=0){
  const tr=document.createElement("tr");
  tr.innerHTML=`
    <td><input value="${t}"></td>
    <td><input type="number" value="${q}"></td>
    <td><button onclick="this.parentNode.parentNode.remove()">X</button></td>`;
  entrada.appendChild(tr);
}

function gradeNumeros(){
  entrada.innerHTML="";
  [["38",20],["40",20],["42",20],["44",40],["46",30],["48",30],["50",30],["52",20],["54",20],["56",20],["58",20]]
  .forEach(i=>addLinha(i[0],i[1]));
}

function gradeLetras(){
  entrada.innerHTML="";
  [["P",60],["M",160],["G",160],["GG",110]]
  .forEach(i=>addLinha(i[0],i[1]));
}

function gerar(){
  res.innerHTML="";
  let dados=[...entrada.querySelectorAll("tr")].map(r=>({
    t:r.children[0].firstChild.value,
    q:+r.children[1].firstChild.value
  })).filter(i=>i.q>0);

  if(!dados.length)return;

  criarOpcao("op1","Op√ß√£o 1 ‚Äì Plano Geral",dados);
  criarOpcao("op2","Op√ß√£o 2 ‚Äì Agrupamento Otimizado",dados);
  criarOpcao("op3","Op√ß√£o 3 ‚Äì Afinidade de Pares",dados);
}

function criarOpcao(id,titulo,dados){
  let html=`<div class="titulo ${id}">${titulo}</div>`;
  html+=criarCard("ENFESTO",dados);
  res.innerHTML+=html;
}

function criarCard(nome,dados){
  let fol=Math.min(...dados.map(d=>d.q));
  let linhas="";
  let risco=0;
  dados.forEach(d=>{
    let m=Math.round(d.q/fol)||1;
    let prod=m*fol;
    let saldo=prod-d.q;
    risco+=m;
    linhas+=`
      <tr>
        <td>${d.t}</td>
        <td>${d.q}</td>
        <td>${m}</td>
        <td>${prod}</td>
        <td class="${saldo>=0?'ok':'bad'}">${saldo>=0?'+':''}${saldo}</td>
      </tr>`;
  });
  return `
  <div class="card">
    <div class="card-head">
      <div>${nome}</div>
      <div>FOLHAS: ${fol}</div>
    </div>
    <table>
      <tr><th>TAM</th><th>PEDIDO</th><th>MOLDES</th><th>PROD.</th><th>SALDO</th></tr>
      ${linhas}
    </table>
    <div style="margin-top:10px;font-weight:bold">
      RISCO: ${risco.toFixed(2)}m
    </div>
  </div>`;
}

function imprimir(){
  const f=document.getElementById("filtroPrint").value;
  document.querySelectorAll(".op1,.op2,.op3").forEach(o=>{
    o.style.display=(f==="all"||o.classList.contains(f))?"block":"none";
  });
  window.print();
  document.querySelectorAll(".op1,.op2,.op3").forEach(o=>o.style.display="block");
}

gradeLetras();
</script>

</body>
</html>
