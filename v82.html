<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>SISTEMA DE CORTE v82.0</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:Segoe UI,Arial;
  background:#f1f5f9;
  margin:0;
  padding:20px;
}
.box{
  max-width:1100px;
  margin:auto;
  background:#fff;
  padding:25px;
  border-radius:15px;
  box-shadow:0 10px 30px rgba(0,0,0,.15);
}
.header{
  background:#020617;
  color:#fff;
  padding:20px;
  border-radius:10px;
  text-align:center;
}
.header input,.header select{
  padding:6px;
  border-radius:6px;
  border:none;
  font-weight:bold;
}
.controls{
  display:flex;
  gap:10px;
  justify-content:center;
  flex-wrap:wrap;
  margin:20px 0;
}
.btn{
  padding:10px 15px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-weight:bold;
}
.btn-grade{background:#64748b;color:#fff}
.btn-calc{background:#10b981;color:#fff;width:100%;font-size:18px}
.btn-print{background:#3b82f6;color:#fff;width:100%;font-size:18px;margin-top:10px}

table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #cbd5f5;padding:10px;text-align:center}
th{background:#334155;color:#fff}

.card{
  border:2px solid #020617;
  border-radius:10px;
  padding:15px;
  margin-top:20px;
  page-break-inside:avoid;
}
.card-header{
  display:flex;
  justify-content:space-between;
  font-weight:bold;
  border-bottom:2px solid #020617;
  padding-bottom:10px;
}

.sessao{
  margin-top:30px;
}
.sessao h3{
  background:#020617;
  color:#fff;
  padding:12px;
  border-radius:8px;
}

.sobra{color:green}
.falta{color:red}

select#printOpt{
  width:100%;
  padding:10px;
  margin-top:10px;
  font-weight:bold;
}

/* ====== IMPRESS√ÉO ====== */
@media print{
  .controls,.btn,.header input,.header select,#printOpt{display:none!important}
  body{background:#fff}
  .box{box-shadow:none}
  footer{position:fixed;bottom:10px;width:100%;text-align:center;font-size:11px;color:#777}
}
</style>
</head>

<body>

<div class="box">
  <div class="header">
    <h2>SISTEMA DE CORTE v82.0</h2>
    L <input type="number" id="L" value="1.56" step="0.01">
    √Årea
    <select id="A">
      <option value="0.5">Pequenas 0,50m</option>
      <option value="0.9" selected>M√©dias 0,90m</option>
      <option value="1.3">Grandes 1,30m</option>
      <option value="1.6">Extra G 1,60m</option>
    </select>
    Mesa <input type="number" id="M" value="7">
  </div>

  <div class="controls">
    <button class="btn btn-grade" onclick="setGrade([[38,20],[40,20],[42,20],[44,40],[46,30],[48,30],[50,30],[52,20],[54,20],[56,20],[58,20]])">GRADE 38‚Äì58</button>
    <button class="btn btn-grade" onclick="setGrade([['P',60],['M',160],['G',160],['GG',110]])">GRADE LETRAS</button>
    <button class="btn btn-grade" onclick="addLinha('',0)">+ TAMANHO</button>
  </div>

  <table>
    <thead>
      <tr><th>Tamanho</th><th>Pedido</th><th>A√ß√£o</th></tr>
    </thead>
    <tbody id="corpoEntrada"></tbody>
  </table>

  <button class="btn btn-calc" onclick="gerarTudo()">‚ö° GERAR ENFESTOS</button>

  <select id="printOpt">
    <option value="all">Imprimir todas as op√ß√µes</option>
    <option value="1">Somente Op√ß√£o 1</option>
    <option value="2">Somente Op√ß√£o 2</option>
    <option value="3">Somente Op√ß√£o 3</option>
  </select>

  <button class="btn btn-print" onclick="imprimir()">üñ®Ô∏è IMPRIMIR</button>

  <div id="display"></div>
</div>

<footer>by Carlos Daniel / DANI</footer>

<script>
function addLinha(t,q){
  corpoEntrada.insertAdjacentHTML("beforeend",
    `<tr>
      <td><input class="t" value="${t}" style="width:60px"></td>
      <td><input class="q" type="number" value="${q}" style="width:80px"></td>
      <td><button onclick="this.closest('tr').remove()">X</button></td>
    </tr>`);
}

function setGrade(g){
  corpoEntrada.innerHTML="";
  g.forEach(i=>addLinha(i[0],i[1]));
}

function gerarTudo(){
  display.innerHTML="";
  let p=[];
  document.querySelectorAll("#corpoEntrada tr").forEach(r=>{
    let t=r.querySelector(".t").value;
    let q=+r.querySelector(".q").value||0;
    if(q>0)p.push({t,q});
  });
  if(!p.length)return alert("Informe pedidos");

  criarOpcao(1,p);
  criarOpcao(2,p);
  criarOpcao(3,p);
}

function criarOpcao(n,p){
  let sec=document.createElement("div");
  sec.className="sessao opcao"+n;
  sec.innerHTML=`<h3>Op√ß√£o ${n}</h3>`;
  p.forEach(i=>{
    let folhas=i.q;
    sec.innerHTML+=`
    <div class="card">
      <div class="card-header">${i.t} | Folhas ${folhas}</div>
      Produ√ß√£o: ${folhas} pe√ßas
    </div>`;
  });
  display.appendChild(sec);
}

function imprimir(){
  let v=printOpt.value;
  document.querySelectorAll(".sessao").forEach(s=>{
    s.style.display=(v==="all"||s.classList.contains("opcao"+v))?"block":"none";
  });
  window.print();
}
</script>

</body>
</html>
