<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>ADMIN â€” SISTEMA DE CORTE PRO</title>

<style>
body{
  background:#0b1220;
  font-family:Arial;
  color:#fff;
}
.container{
  max-width:900px;
  margin:40px auto;
}
.card{
  background:#0f172a;
  padding:20px;
  border-radius:10px;
  margin-bottom:20px;
}
input,select,button{
  width:100%;
  padding:10px;
  margin:6px 0;
  border-radius:6px;
  border:none;
}
button{
  background:#10b981;
  color:#000;
  font-weight:bold;
  cursor:pointer;
}
table{
  width:100%;
  border-collapse:collapse;
}
th,td{
  padding:8px;
  border-bottom:1px solid #1e293b;
}
.hidden{display:none}
</style>
</head>

<body>

<div class="container">

<!-- LOGIN -->
<div class="card" id="loginBox">
  <h2>Login Admin</h2>
  <input type="password" id="adminPass" placeholder="Senha admin">
  <button onclick="login()">Entrar</button>
</div>

<!-- PAINEL -->
<div class="card hidden" id="panel">

<h2>SISTEMA DE CORTE PRO</h2>

<h3>Criar Cliente</h3>

<select id="status">
  <option>ON</option>
  <option>OFF</option>
</select>

<input id="senha" placeholder="Senha">
<input id="validade" type="date">
<input id="cliente" placeholder="Cliente">

<select id="plano">
  <option>MENSAL</option>
  <option>ANUAL</option>
</select>

<select id="etiquetas">
  <option>ON</option>
  <option>OFF</option>
</select>

<button onclick="salvar()">Salvar</button>

<h3>Clientes</h3>

<table>
<thead>
<tr>
<th>Status</th>
<th>Cliente</th>
<th>Senha</th>
<th>Validade</th>
<th>Plano</th>
<th>Etiquetas</th>
</tr>
</thead>
<tbody id="lista"></tbody>
</table>

</div>
</div>

<script>
const URL = location.href;

function login(){
  if(adminPass.value !== "Amor2403"){
    alert("Senha incorreta");
    return;
  }
  loginBox.classList.add("hidden");
  panel.classList.remove("hidden");
  carregar();
}

function carregar(){
  fetch(URL+"?acao=listar")
    .then(r=>r.json())
    .then(d=>{
      lista.innerHTML="";
      d.forEach(c=>{
        lista.innerHTML+=`
          <tr>
            <td>${c.status}</td>
            <td>${c.cliente}</td>
            <td>${c.senha}</td>
            <td>${c.validade}</td>
            <td>${c.plano}</td>
            <td>${c.etiquetas}</td>
          </tr>`;
      });
    });
}

function salvar(){
  const p = new URLSearchParams({
    acao:"criar",
    status:status.value,
    senha:senha.value,
    validade:validade.value,
    cliente:cliente.value,
    plano:plano.value,
    etiquetas:etiquetas.value
  });
  fetch(URL+"?"+p).then(()=>carregar());
}
</script>

</body>
</html>
